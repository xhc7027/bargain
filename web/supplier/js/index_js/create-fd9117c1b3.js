"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},app=new Vue({el:"#main-wrap",components:{"alert-tips":{props:["message"],template:'<div class="alert-tips" ref="deleteList">{{message}}</div>'}},data:{activeName:"first",mallId:"",ajaxUrl:{uploadImg:"/supplier/file",checkWord:"/supplier/check-keyword",getDefaultData:"/supplier/get-bargain-data",getBargainCalculate:"/supplier/get-bargain-calcul",saveBargain:"/supplier/save-bargain"},from:"",editor:"",bargain:new Bargain,isShowSelecteGoodsBtn:!1,phone:{index:1,oldIndex:""},isGoingAct:0,userActivityModel:{freeModelEndDate:"",payModelEndDate:"",tryoutModelEndDate:"",userModelInfo:"",formatUserModelEndDate:""},baseSetting:{name:"",isMallGood:1,organizer:"",startDate:"",endDate:"",adLink:"",adImages:[]},selGoods:!1,stock:"",mallGoodsData:{cate:{},goods:"",size:8,nowPage:1,pageTotal:"",errorMsg:"",mallSearchCate:"",goodsSelected:"",oldGoodsSelected:"",mallSearchName:"",isLoadingShow:!1},actSetting:{price:0,number:0,lowestPrice:0,priceReduction:"",priceReductionMin:0,priceReductionMax:0,priceIncrease:"",priceIncreaseMin:0,priceIncreaseMax:0,acquisitionTiming:"1",contact:[],priceTimes:{leastTimes:0,mostTimes:0}},contactSelect:[],advSetting:{title:"",keyword:"",image:"",shareTitle:"",shareContent:"",shareImage:"",description:"",isSettingShare:"1"},saveTrafficModel:!0,isShowModelSelect:"",oldKeyword:"",isCheckKeyword:!0,defaultShare:{shareContent:"",shareImage:"",shareTitle:""},isLeave:!1,errorMessage:{date:"",adImages:"",content:"",settingPrice:"",contact:"",actImg:"",shareImg:""},alertIsShow:!1,alertMessage:"",isInit:!1},watch:{"baseSetting.endDate":function(e,t){var r=this,a="",i="",n=r.userActivityModel,o=n.freeModelEndDate,s=n.payModelEndDate,c=n.tryoutModelEndDate,d="",l="",u="",g="",p="",m="",h=new Date(e).getTime()-864e5;o&&(d=new Date(o).getTime(),g=r.formatDateToChinese(new Date(o))),s&&(l=new Date(s).getTime(),p=r.formatDateToChinese(new Date(s))),o||s||!c||(u=new Date(c).getTime(),m=r.formatDateToChinese(new Date(c))),h?d&&l?d>l?h<=l?(r.isShowModelSelect=!0,a=3):h<=d?(r.isShowModelSelect=!1,a=2):(r.isShowModelSelect=!1,a=0):h<=d?(r.isShowModelSelect=!1,a=2):h<=l?(r.isShowModelSelect=!0,a=3):(r.isShowModelSelect=!1,a=1):l?h<=l?(r.isShowModelSelect=!0,a=3):(r.isShowModelSelect=!1,a=1):d?(a=h<d?2:0,r.isShowModelSelect=!1):u&&(a=h<u?4:0,r.isShowModelSelect=!1):r.isShowModelSelect=!1,i=2===a?'您当前为<span class="strong">免费使用</span>模式，截止日期至'+g:3===a?'您当前为<span class="strong">付费使用</span>模式，截止日期至'+p:4===a?'您当前为<span class="strong">免费试用</span>模式，截止日期至'+m:1===a||0===a?"活动截止时间不能超过使用模式截止期":"",n.userModelInfo=i}},computed:{getMallGoods:function(){var e="",t=IdouziTools.getEnv();return"dev"==t?e+="-dev":"test"==t?e+="-test":e="","http://search"+e+".mall.idouzi.com/api/bargain-get-shop-info"},isStartEdit:function(){return"edit"===this.from&&1===this.isGoingAct},isTruePriceTimes:function(){var e=this;return e.actSetting.priceTimes.leastTimes>=0&&e.actSetting.priceTimes.mostTimes>=0},baseSettingRules:function(){return{name:[{required:!0,message:"请输入活动名称"}],organizer:[{required:!0,message:"请输入活动单位",trigger:"blur"}],startDate:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],endDate:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"},{validator:this.checkEndDate}],adLink:[{validator:this.checkAdLink}]}},actSettingRules:function(){return{price:[{required:!0,message:"商品原价不能为空"},{type:"number",message:"商品原价必须为数字"}],number:[{validator:this.checkMallNumber}],lowestPrice:[{validator:this.checkMallPrice}]}},advSettingRules:function(){return{title:[{required:!0,message:"活动标题不能为空"}],keyword:[{required:!0,message:"关键词不能为空"},{validator:this.checkAdvKeyword,trigger:"blur"}],description:[{required:!0,message:"活动说明不能为为空"}],shareTitle:[{required:!0,message:"分享标题不能为空"}],shareContent:[{required:!0,message:"分享内容不能为空"}]}},phoneKeyWord:function(){return""===this.advSetting.keyword?"关键词":this.advSetting.keyword},phoneBg:function(){var e,t=this.phone.index;switch(t){case 0:e="phone-description";break;case 1:e="phone-index";break;case 2:e="phone-write";break;case 3:e="phone-cut";break;case 4:e="phone-success";break;case 5:e="phone-prize";break;case 6:e="phone-prize-code";break;case 7:e="phone-prize-success"}return e},isShowPhoneBtn:function(){var e=this.phone.index;return 1===e||3===e||5===e||7===e}},methods:{init:function(){var e=this,t=e.userActivityModel,r=IdouziTools.getQueryValue("freeEndDate"),a=IdouziTools.getQueryValue("payEndDate"),i=IdouziTools.getQueryValue("tryoutEndDate"),n=document.getElementsByClassName("banner-list")[0];Sortable.create(n,{animation:250,sort:!0,dataIdAttr:"data-sort"}),t.freeModelEndDate=r?r.replace(/-/g,"/"):"",t.payModelEndDate=a?a.replace(/-/g,"/"):"",t.tryoutModelEndDate=i?i.replace(/-/g,"/"):"",e.editor=UM.getEditor("editor"),window.onbeforeunload=this.isShowLeaveTips,e.from=e.bargain.getUrlParam("from"),e.getOldData()},jumpWriteInfo:function(){var e=this,t=e.phone,r=t.index;switch(0!==r&&(t.oldIndex=r),r){case 0:t.index=t.oldIndex;break;case 1:t.index=2;break;case 2:t.index=3;break;case 3:t.index=4;break;case 4:t.index=5;break;case 5:t.index=6;break;case 6:t.index=7}},jumpActDescription:function(){var e=this,t=e.phone;t.oldIndex=t.index,t.index=0},phoneJumpBack:function(){var e=this.phone,t=e.index;t>1&&(e.index=t-1)},getOldData:function(){var e=this,t=e.bargain,r=e.from,a=t.getUrlParam("eventId"),i={from:r,eventId:"create"===r?"":a};e.$http.get(e.ajaxUrl.getDefaultData,{params:i,timeout:1e4}).then(function(t){var a=t.data,i=a.return_msg;if("SUCCESS"===a.return_code){var n=i.bargainProbability,o=i.resources,s=o.number,c=i.advancedSetting,d=c.keyword?c.keyword:"";e.isShowSelecteGoodsBtn=!!i.mallStatus,e.baseSetting={name:"",isMallGood:parseInt(o.type),organizer:i.organizer,startDate:new Date(1e3*i.startTime),endDate:new Date(1e3*i.endTime),adLink:i.adLink,adImages:i.adImages},e.editor.setContent(i.content),e.mallGoodsData.goodsSelected=o.id?o.id:"",e.isGoingAct=i.eventStart?i.eventStart:"",e.actSetting={price:o.price,lowestPrice:i.lowestPrice,priceReduction:""===n.priceReduction?"":100*n.priceReduction,priceReductionMin:n.priceReductionRange[0],priceReductionMax:n.priceReductionRange[1],priceIncrease:""===n.priceIncrease?"":100*n.priceIncrease,priceIncreaseMin:n.priceIncreaseRange[0],priceIncreaseMax:n.priceIncreaseRange[1],acquisitionTiming:i.acquisitionTiming.toString(),contact:i.contact,priceTimes:i.priceTimes},e.advSetting={title:c.title,keyword:d,image:c.image,shareTitle:c.shareTitle,shareContent:c.shareContent,shareImage:c.shareImage,description:c.description,isSettingShare:c.shareType.toString()},e.mallId=o.mallId||"",e.defaultShare="create"===r?{shareContent:c.shareContent,shareImage:c.shareImage,shareTitle:c.shareTitle}:{shareContent:c.defaultShareContent,shareImage:c.defaultShareImage,shareTitle:c.defaultShareTitle},e.oldKeyword=c.keyword?c.keyword:"",0==o.type&&"copy"===e.from?e.$http.get(e.getMallGoods,{params:{goodsId:o.id},timeout:1e4,credentials:!0}).then(function(t){var r=t.data,a=r.return_msg;if("SUCCESS"===r.return_code){var i=a.goodsList.goodsData;i.length?(e.stock=i[0].stock,e.baseSetting.name=i[0].goodsName):(e.clearMallName(),e.alertTipsShow("商品为空"))}else e.clearMallName(),e.alertTipsShow(a);e.actSetting.number=s},function(t){e.alertTipsShow(t.status+": 网络错误，请刷新后重试")}):(e.baseSetting.name=i.name,e.actSetting.number=s),e.isInit=!0}else e.alertTipsShow(i)},function(t){e.alertTipsShow(t.status+": 获取数据失败，请刷新后重试",!1)})},removeBanner:function(e){var t=this.baseSetting.adImages,r=e.currentTarget,a=r.parentNode,i=parseInt(a.getAttribute("data-sort"));t.splice(i,1)},selMallGoods:function(){var e=this;e.selGoods=!0,e.mallGoodsData.oldGoodsSelected=e.mallGoodsData.goodsSelected,e.getGoodsData()},getGoodsData:function(e,t){var r,a=this;t=t||{},t.pageSize=10,t.page=e||a.mallGoodsData.nowPage,a.mallGoodsData.isLoadingShow=!0,a.$http.get(a.getMallGoods,{params:t,timeout:1e4,credentials:!0}).then(function(e){var t=e.data,i=t.return_msg,n=a.mallGoodsData;if("SUCCESS"===t.return_code){for(var o=i.categoryList,s=[],c=0,d=o.length;c<d;c++){var l=o[c].children;if(o[c].isTop=!0,s.push(o[c]),l&&l.length)for(var u=0,g=l.length;u<g;u++)s.push(l[u])}n.cate=s,n.pageTotal=i.goodsList.total,r=i.goodsList.goodsData;for(var c=0,d=r.length;c<d;c++){var p=r[c].createdTime;r[c].createdTime=new Date(1e3*p).Format("yyyy-MM-dd hh:mm")}if(n.goods=r,0!==i.goodsList.total){a.mallId=i.goodsList.goodsData[0].mallId;var m=setTimeout(function(){$(".googs-content-list").niceScroll({cursorcolor:"#ccc"}),$(".googs-content-list").getNiceScroll().resize(),clearTimeout(m)},100)}a.mallGoodsData.goodsSelected="",a.mallGoodsData.isLoadingShow=!1}else a.mallGoodsData.isLoadingShow=!1,n.goods=[]},function(e){a.alertTipsShow(e.status+": 网络错误，请刷新后重试")})},mallCurrentPage:function(e){var t=this;t.mallGoodsData.nowPage=e,t.getGoodsData(e)},SearchGoodsByName:function(){var e=this,t={goodsName:e.mallGoodsData.mallSearchName};e.getGoodsData(1,t)},SearchGoodsByType:function(){var e=this,t={categoryId:e.mallGoodsData.mallSearchCate};e.getGoodsData(1,t)},addMallGoods:function(){var e=this,t=e.mallGoodsData,r=(t.goodsSelected,e.actSetting.number),a=e.actSetting.lowestPrice,i="",n="",o="";if(!t.oldGoodsSelected&&!t.goodsSelected)return t.errorMsg="请选择要砍价的商品",!1;e.selGoods=!1,e.bargain.forEachData(t.goods,function(e){if(e.goodsId===t.goodsSelected)return i=e.goodsName,n=e.benefitPrice,o=e.stock,!1}),i&&(e.baseSetting.name=i,e.baseSetting.isMallGood=0,e.actSetting.price=n,e.actSetting.lowestPrice=a>n?n:a,e.stock=parseInt(o),e.actSetting.number=r>o?o:r,t.errorMsg="",e.actSetting.acquisitionTiming="0",e.getPriceTimes()),t.goodsSelected===t.oldGoodsSelected||t.goodsSelected||(t.goodsSelected=t.oldGoodsSelected)},cancelAddMallGoods:function(){var e=this,t=e.mallGoodsData;e.selGoods=!1,t.goodsSelected!==t.oldGoodsSelected&&(t.goodsSelected=t.oldGoodsSelected),t.errorMsg=""},clearMallName:function(){var e=this;e.baseSetting.name="",e.baseSetting.isMallGood=1,e.actSetting.price="",e.mallGoodsData.goodsSelected=""},getPriceTimes:function(){for(var e=this,t=e.actSetting,r=document.querySelectorAll(".setting-price input"),a=t.priceIncrease+t.priceReduction===100,i=e.actSetting.price-e.actSetting.lowestPrice,n=t.priceReductionMax-t.priceReductionMin>=0,o=i>=t.priceReductionMax,s=t.priceIncreaseMax-t.priceIncreaseMin>=0,c=i>=t.priceIncreaseMax,d=0;d<r.length;d++){var l=r[d],u=parseFloat(l.value);if(!(e.checkNumber(u)&&u>=0))return!1;if(l.hasClass("priceReduction")||l.hasClass("priceIncrease")){if(u<0||u>100)return!1}}if(!a)return!1;if(!n)return!1;if(!s)return!1;if(!o||!c)return e.actSetting.priceTimes={leastTimes:0,mostTimes:0},!1;var g={bargainProbability:{priceReduction:t.priceReduction/100,priceReductionRange:[t.priceReductionMin,t.priceReductionMax],priceIncrease:t.priceIncrease/100,priceIncreaseRange:[t.priceIncreaseMin,t.priceIncreaseMax]},lowestPrice:t.lowestPrice,price:t.price},p=e.ajaxUrl.getBargainCalculate;e.$http.post(p,g,{emulateJSON:!0,timeout:1e4}).then(function(t){var r=t.data,a=r.return_code,i=r.return_msg;if("SUCCESS"===a){var n=i.leastTimes<0||i.mostTimes<0;e.actSetting.priceTimes={leastTimes:i.leastTimes,mostTimes:i.mostTimes},e.errorTips({status:n,errorName:"settingPrice",errorMsg:"您这样设置可能永远砍不到最低价哦"})}},function(t){e.alertTipsShow(t.status+": 网络错误，请刷新后重试")})},uploadBanner:function(e){var t=this,r=e.currentTarget,a=r.files,i=document.querySelectorAll(".banner-list li").length;if(0===a.length)return!1;if(a.length+i>3)t.$alert("最多只能上传3张图片","上传图片",{confirmButtonText:"确定"});else for(var n=0,o=a.length;n<o;n++){var s=a[n];if(!t.checkImgFormat(s))return!1;t.uploadImg(r,s,function(e){t.baseSetting.adImages.push(e)})}},uploadActImg:function(e){var t=this,r=e.currentTarget,a=r.files[0];return!!a&&(!!t.checkImgFormat(a)&&void t.uploadImg(r,a,function(e){t.advSetting.image=e}))},uploadShareImg:function(e){var t=this,r=e.currentTarget,a=r.files[0];return!!a&&(!!t.checkImgFormat(a)&&void t.uploadImg(r,a,function(e){t.advSetting.shareImage=e}))},uploadImg:function(e,t,r){var a=this,i=e.next(),n=i.parentNode,o=new FormData;e.disabled=!0,n.addClass("upload-btn-disabled"),o.append("file",t),a.$http.post(a.ajaxUrl.uploadImg,o,{emulateJSON:!0,progress:function(e){i.innerText=parseInt(e.loaded/e.total*100)+"%"}}).then(function(t){var o=t.data;i.innerText="选择图片",e.disabled=!1,"SUCCESS"===o.return_code?(n.removeClass("upload-btn-disabled"),"function"===(void 0===r?"undefined":_typeof(r)).toLowerCase()&&r(o.return_msg)):(n.removeClass("upload-btn-disabled"),a.alertTipsShow("上传图片失败，请稍后重试"))},function(t){i.innerText="选择图片",e.disabled=!1,n.removeClass("upload-btn-disabled"),a.alertTipsShow("上传图片失败，请稍后重试")})},checkImgFormat:function(e){var t=this,r=/^(\s|\S)+(jpg|png|jpeg|bmp)+$/,a=e.type;return e.size>3145728?(t.$alert("只能上传3M以下图片","上传图片",{confirmButtonText:"确定"}),!1):!!r.test(a.toLowerCase())||(t.$alert("仅支持图片格式：jpg、jpeg、png、bmp","上传图片",{confirmButtonText:"确定"}),!1)},calcPriceReduction:function(){var e=this,t=e.actSetting,r=t.priceReduction;!e.checkNumber(r)||r<0?t.priceReduction=0:r>100&&(t.priceReduction=100),r||(t.priceReductionMax=0,t.priceReductionMin=0),t.priceIncrease=100-t.priceReduction},calcPriceIncrease:function(){var e=this,t=e.actSetting,r=t.priceIncrease;!e.checkNumber(r)||r<0?t.priceIncrease=0:r>100&&(t.priceIncrease=100),r||(t.priceIncreaseMax=0,t.priceIncreaseMin=0),t.priceReduction=100-t.priceIncrease},isShowLeaveTips:function(){if(!this.isLeave)return"确定要离开页面？"},save:function(e,t,r){var a=this,i=!1,n=!1,o=!1,s=a.baseSetting,c=a.actSetting,d=a.advSetting,l=location.search,u=document.getElementById("save");u.innerText="保存中...",u.style.backgroundColor="#ccc",u.disabled=!0,a.isCheckKeyword=!1,a.$refs[e].validate(function(e){if(!e)return a.enableSaveBtn(),!1;var t=0===a.baseSetting.adImages.length,r=""===a.editor.getContentTxt();return a.errorTips({status:t,errorName:"adImages",errorMsg:"请至少上传一张轮播图片"}),!t&&(a.errorTips({status:r,errorName:"content",errorMsg:"请填写活动说明"}),!r&&void(i=!0))}),i&&a.$refs[t].validate(function(e){if(!e)return a.enableSaveBtn(),!1;for(var t=document.querySelectorAll(".setting-price input"),r=0;r<t.length;r++){var i=t[r],o=parseFloat(i.value),s=a.checkNumber(o)&&o>=0;if(a.errorTips({status:!s,errorName:"settingPrice",errorMsg:"请输入正确的砍价设置",errorEle:i}),!s)return!1;if(i.hasClass("priceReduction")||i.hasClass("priceIncrease")){var d=o<0||o>100;if(a.errorTips({status:d,errorName:"settingPrice",errorMsg:"请输入正确的砍价概率",errorEle:i}),d)return!1}}var l=c.priceIncrease+c.priceReduction===100,u=a.actSetting.price-a.actSetting.lowestPrice,g=u>=c.priceReductionMax,p=c.priceReductionMax-c.priceReductionMin>=0,m=u>=c.priceIncreaseMax,h=c.priceIncreaseMax-c.priceIncreaseMin>=0,S=c.contact.length>0;return a.errorTips({status:!l,errorName:"settingPrice",errorMsg:"涨价几率和降价几率的和必须等于100"}),!!l&&(a.errorTips({status:!p,errorName:"settingPrice",errorMsg:"请输入正确的降价范围"}),!!p&&(a.errorTips({status:!g,errorName:"settingPrice",errorMsg:"降价范围不能超出最大可砍范围",errorEle:"priceReductionMax"}),!!g&&(a.errorTips({status:!h,errorName:"settingPrice",errorMsg:"请输入正确的涨价范围"}),!!h&&(a.errorTips({status:!m,errorName:"settingPrice",errorMsg:"涨价范围不能超出最大可砍范围",errorEle:"priceIncreaseMax"}),!!m&&(a.errorTips({status:!S,errorName:"contact",errorMsg:"请至少选择一项联系信息"}),!!S&&void(n=!0))))))}),n&&a.$refs[r].validate(function(e){if(!e)return a.activeName="third",a.enableSaveBtn(),!1;if(o=!0,i&&n){var t={Event:{acquisitionTiming:c.acquisitionTiming,adImages:[],adLink:s.adLink,advancedSetting:{description:d.description,image:d.image,keyword:d.keyword,shareContent:d.shareContent,shareImage:d.shareImage,shareTitle:d.shareTitle,title:d.title,shareType:d.isSettingShare},contact:a.contactSelect,lowestPrice:c.lowestPrice,name:s.name,organizer:s.organizer,resources:{id:a.mallGoodsData.goodsSelected,name:s.name,price:c.price,type:s.isMallGood,mallId:a.mallId},startTime:parseInt(s.startDate.getTime()/1e3),endTime:parseInt(s.endDate.getTime()/1e3)},BargainProbability:{priceIncrease:c.priceIncrease/100,priceIncreaseRange:[c.priceIncreaseMin,c.priceIncreaseMax],priceReduction:c.priceReduction/100,priceReductionRange:[c.priceReductionMin,c.priceReductionMax]},content:a.editor.getContent()};"edit"!==a.from&&(t.Event.resources.number=c.number,a.isShowModelSelect&&(t.Event.isShowAd=a.saveTrafficModel?1:0),t.Event.pattern=a.isShowModelSelect?"chargePattern":"freePattern"),"0"===a.advSetting.isSettingShare&&(t.Event.advancedSetting.shareImage=a.defaultShare.shareImage,t.Event.advancedSetting.shareTitle=a.defaultShare.shareTitle,t.Event.advancedSetting.shareContent=a.defaultShare.shareContent),a.bargain.forEachData(document.querySelectorAll(".banner-list li"),function(e,r){var a=e.getAttribute("data-sort");t.Event.adImages.push(s.adImages[a])}),a.$http.post(a.ajaxUrl.saveBargain+l,t,{emulateJSON:!0,timeout:1e4}).then(function(e){var t=e.data,r=t.return_code,i=t.return_msg;"SUCCESS"===r?(a.isLeave=!0,location.href="edit"==a.from?"/supplier/index":"/supplier/index#newFlag"):(a.enableSaveBtn(),a.alertTipsShow(i))},function(e){a.enableSaveBtn(),a.alertTipsShow(e.status+": 网络错误，请刷新后重试")})}}),i?n||(a.activeName="second"):a.activeName="first"},cancelSave:function(){location.href="/supplier/index"},enableSaveBtn:function(){var e=document.getElementById("save");e.innerText="保存",e.style.backgroundColor="#ff981a",e.removeAttribute("disabled"),this.isCheckKeyword=!0},checkMallNumber:function(e,t,r){var a=this;return""===t||null===t||void 0===t?r(new Error("商品数量不能为空")):a.checkNumber(t)?!a.isStartEdit&&a.stock<t&&a.stock>0&&0==a.baseSetting.isMallGood?r(new Error("商品数量不能大于库存")):void r():r(new Error("商品数量必须为数字"))},checkMallPrice:function(e,t,r){var a=this;return""===t||null===t||void 0===t?r(new Error("砍价目标不能为空")):a.checkNumber(t)?!a.isStartEdit&&t>a.actSetting.price?r(new Error("砍价目标不能大于商品原价")):void r():r(new Error("砍价目标必须为数字"))},checkEndDate:function(e,t,r){var a=this,i=a.userActivityModel,n=new Date(t).getTime()-864e5,o=new Date(i.tryoutModelEndDate).getTime(),s=new Date(i.freeModelEndDate).getTime(),c=new Date(i.payModelEndDate).getTime();if(a.checkDate(a.baseSetting.startDate,t))return r(new Error("结束时间不能小于开始时间"));if(s&&c){if(s>c){if(n>s)return r(new Error("活动截止时间不能超过免费模式截止期"))}else if(n>c)return r(new Error("活动截止时间不能超过付费模式截止期"))}else if(s){if(n>s)return r(new Error("活动截止时间不能超过免费模式截止期"))}else if(c){if(n>c)return r(new Error("活动截止时间不能超过付费模式截止期"))}else if(o&&n>o)return r(new Error("活动截止时间不能超过试用模式截止期"));r()},checkAdLink:function(e,t,r){var a=this.checkLink(t);""!==t?a?r():r(new Error("请输入正确的跳转链接")):r()},checkAdvKeyword:function(e,t,r){var a=this,i=a.advSetting.keyword,n="edit"===a.from,o=a.oldKeyword===a.advSetting.keyword;(i&&!n||n&&!o)&&a.isCheckKeyword?a.$http.get(a.ajaxUrl.checkWord,{params:{keyword:i},timeout:1e4}).then(function(e){var t=e.data;"SUCCESS"===t.return_code?r():r(new Error(t.return_msg))},function(e){r(new Error(e.status+": 网络错误，请刷新后重试！"))}):r()},checkDate:function(e,t){var r=new Date(e).getTime();return new Date(t).getTime()-r<0},checkLink:function(e){return!!new RegExp("(http[s]{0,1}|ftp)://[a-zA-Z0-9\\.\\-]+\\.([a-zA-Z]{2,4})(:\\d+)?(/[a-zA-Z0-9\\.\\-~!@#$%^&*+?:_/=<>]*)?","gi").test(e)},checkNumber:function(e){return!("NaN"==parseFloat(e).toString())},errorTips:function(e){var t,r=this,a=e.status,i=e.errorName,n=e.errorMsg,o=e.errorEle;o&&(t=r.$refs[o]?r.$refs[o]:o),t?(o=t.$el?t.$el:t,a?(r.errorMessage[i]=n,o.addClass("error-border"),r.enableSaveBtn()):(r.errorMessage[i]="",o.removeClass("error-border"))):a?(r.errorMessage[i]=n,r.enableSaveBtn()):r.errorMessage[i]=""},alertTipsShow:function(e,t){var r=this;if(r.alertMessage=e,r.alertIsShow=!0,t=!1!==t||t)var a=setTimeout(function(){r.alertIsShow=!1,clearTimeout(a)},2e3)},formatDateToChinese:function(e){var t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return r=r<9?"0"+r:r,a=a<9?"0"+a:a,t+"年"+r+"月"+a+"日"}},mounted:function(){this.init(),$(".phone-content").niceScroll({cursorborder:"1px solid transparent"})}});